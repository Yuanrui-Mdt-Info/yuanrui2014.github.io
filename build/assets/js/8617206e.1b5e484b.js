"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[1562],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=o,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||i;return n?r.createElement(h,a(a({ref:t},p),{},{components:n})):r.createElement(h,a({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},31631:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const i={},a="Connector Development Kit (Python)",l={unversionedId:"connector-development/cdk-python/README",id:"connector-development/cdk-python/README",title:"Connector Development Kit (Python)",description:"The Airbyte Python CDK is a framework for rapidly developing production-grade Airbyte connectors. The CDK currently offers helpers specific for creating Airbyte source connectors for:",source:"@site/../docs/connector-development/cdk-python/README.md",sourceDirName:"connector-development/cdk-python",slug:"/connector-development/cdk-python/",permalink:"/connector-development/cdk-python/",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/connector-development/cdk-python/README.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Profile Java Connector Memory Usage",permalink:"/connector-development/tutorials/profile-java-connector-memory"},next:{title:"Basic Concepts",permalink:"/connector-development/cdk-python/basic-concepts"}},s={},c=[{value:"Getting Started",id:"getting-started",level:2},{value:"Concepts &amp; Documentation",id:"concepts--documentation",level:3},{value:"Basic Concepts",id:"basic-concepts",level:4},{value:"Full Refresh Streams",id:"full-refresh-streams",level:4},{value:"Incremental Streams",id:"incremental-streams",level:4},{value:"Practical Tips",id:"practical-tips",level:4},{value:"Example Connectors",id:"example-connectors",level:3},{value:"Contributing",id:"contributing",level:2},{value:"First time setup",id:"first-time-setup",level:3},{value:"Iteration",id:"iteration",level:4},{value:"Debugging",id:"debugging",level:4},{value:"Testing",id:"testing",level:4},{value:"Publishing a new version to PyPi",id:"publishing-a-new-version-to-pypi",level:4},{value:"Coming Soon",id:"coming-soon",level:2}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"connector-development-kit-python"},"Connector Development Kit (Python)"),(0,o.kt)("p",null,"The Airbyte Python CDK is a framework for rapidly developing production-grade Airbyte connectors. The CDK currently offers helpers specific for creating Airbyte source connectors for:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"HTTP APIs ","(","REST APIs, GraphQL, etc..",")"),(0,o.kt)("li",{parentName:"ul"},"Generic Python sources ","(","anything not covered by the above",")"),(0,o.kt)("li",{parentName:"ul"},"Singer Taps (Note: The CDK supports building Singer taps but Airbyte no longer access contributions of this type)")),(0,o.kt)("p",null,"The CDK provides an improved developer experience by providing basic implementation structure and abstracting away low-level glue boilerplate."),(0,o.kt)("p",null,"This document is a general introduction to the CDK. Readers should have basic familiarity with the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.airbyte.com/understanding-airbyte/airbyte-protocol/"},"Airbyte Specification")," before proceeding."),(0,o.kt)("p",null,"If you have any issues with troubleshooting or want to learn more about the CDK from the Airbyte team, head to ",(0,o.kt)("a",{parentName:"p",href:"https://discuss.airbyte.io/c/connector-development/16"},"the Connector Development section of our Discourse forum")," to inquire further!"),(0,o.kt)("h2",{id:"getting-started"},"Getting Started"),(0,o.kt)("p",null,"Generate an empty connector using the code generator. First clone the Airbyte repository then from the repository root run"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"cd airbyte-integrations/connector-templates/generator\n./generate.sh\n")),(0,o.kt)("p",null,"then follow the interactive prompt. Next, find all ",(0,o.kt)("inlineCode",{parentName:"p"},"TODO"),"s in the generated project directory -- they're accompanied by lots of comments explaining what you'll need to do in order to implement your connector. Upon completing all TODOs properly, you should have a functioning connector."),(0,o.kt)("p",null,"Additionally, you can follow ",(0,o.kt)("a",{parentName:"p",href:"/connector-development/tutorials/cdk-tutorial-python-http/getting-started"},"this tutorial")," for a complete walkthrough of creating an HTTP connector using the Airbyte CDK."),(0,o.kt)("h3",{id:"concepts--documentation"},"Concepts & Documentation"),(0,o.kt)("h4",{id:"basic-concepts"},"Basic Concepts"),(0,o.kt)("p",null,"If you want to learn more about the classes required to implement an Airbyte Source, head to our ",(0,o.kt)("a",{parentName:"p",href:"/connector-development/cdk-python/basic-concepts"},"basic concepts doc"),"."),(0,o.kt)("h4",{id:"full-refresh-streams"},"Full Refresh Streams"),(0,o.kt)("p",null,"If you have questions or are running into issues creating your first full refresh stream, head over to our ",(0,o.kt)("a",{parentName:"p",href:"/connector-development/cdk-python/full-refresh-stream"},"full refresh stream doc"),". If you have questions about implementing a ",(0,o.kt)("inlineCode",{parentName:"p"},"path")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"parse_response")," function, this doc is for you."),(0,o.kt)("h4",{id:"incremental-streams"},"Incremental Streams"),(0,o.kt)("p",null,"Having trouble figuring out how to write a ",(0,o.kt)("inlineCode",{parentName:"p"},"stream_slices")," function or aren't sure what a ",(0,o.kt)("inlineCode",{parentName:"p"},"cursor_field")," is? Head to our ",(0,o.kt)("a",{parentName:"p",href:"/connector-development/cdk-python/incremental-stream"},"incremental stream doc"),"."),(0,o.kt)("h4",{id:"practical-tips"},"Practical Tips"),(0,o.kt)("p",null,"Airbyte recommends using the CDK template generator to develop with the CDK. The template generates created all the required scaffolding, with convenient TODOs, allowing developers to truly focus on implementing the API."),(0,o.kt)("p",null,"For tips on useful Python knowledge, see the ",(0,o.kt)("a",{parentName:"p",href:"/connector-development/cdk-python/python-concepts"},"Python Concepts")," page."),(0,o.kt)("p",null,"You can find a complete tutorial for implementing an HTTP source connector in ",(0,o.kt)("a",{parentName:"p",href:"/connector-development/tutorials/cdk-tutorial-python-http/getting-started"},"this tutorial")),(0,o.kt)("h3",{id:"example-connectors"},"Example Connectors"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"HTTP Connectors"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-exchange-rates/source_exchange_rates/source.py"},"Exchangerates API")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-stripe/source_stripe/source.py"},"Stripe")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-slack/source_slack/source.py"},"Slack"))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Simple Python connectors using the barebones ",(0,o.kt)("inlineCode",{parentName:"strong"},"Source")," abstraction"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-google-sheets/google_sheets_source/google_sheets_source.py"},"Google Sheets")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-mailchimp/source_mailchimp/source.py"},"Mailchimp"))),(0,o.kt)("h2",{id:"contributing"},"Contributing"),(0,o.kt)("h3",{id:"first-time-setup"},"First time setup"),(0,o.kt)("p",null,"We assume ",(0,o.kt)("inlineCode",{parentName:"p"},"python")," points to python ",">","=3.9."),(0,o.kt)("p",null,"Setup a virtual env:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},'python -m venv .venv\nsource .venv/bin/activate\npip install -e ".[tests]" # [tests] installs test-only dependencies\n')),(0,o.kt)("h4",{id:"iteration"},"Iteration"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Iterate on the code locally"),(0,o.kt)("li",{parentName:"ul"},"Run tests via ",(0,o.kt)("inlineCode",{parentName:"li"},"pytest -s unit_tests")),(0,o.kt)("li",{parentName:"ul"},"Perform static type checks using ",(0,o.kt)("inlineCode",{parentName:"li"},"mypy airbyte_cdk"),". ",(0,o.kt)("inlineCode",{parentName:"li"},"MyPy")," configuration is in ",(0,o.kt)("inlineCode",{parentName:"li"},".mypy.ini"),"."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"type_check_and_test.sh")," script bundles both type checking and testing in one convenient command. Feel free to use it!")),(0,o.kt)("h4",{id:"debugging"},"Debugging"),(0,o.kt)("p",null,"While developing your connector, you can print detailed debug information during a sync by specifying the ",(0,o.kt)("inlineCode",{parentName:"p"},"--debug")," flag. This allows you to get a better picture of what is happening during each step of your sync."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"python main.py read --config secrets/config.json --catalog sample_files/configured_catalog.json --debug\n")),(0,o.kt)("p",null,"In addition to preset CDK debug statements, you can also add your own statements to emit debug information specific to your connector:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'self.logger.debug("your debug message here", extra={"debug_field": self.value})\n')),(0,o.kt)("h4",{id:"testing"},"Testing"),(0,o.kt)("p",null,"All tests are located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"unit_tests")," directory. Run ",(0,o.kt)("inlineCode",{parentName:"p"},"pytest --cov=airbyte_cdk unit_tests/")," to run them. This also presents a test coverage report."),(0,o.kt)("h4",{id:"publishing-a-new-version-to-pypi"},"Publishing a new version to PyPi"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Bump the package version in ",(0,o.kt)("inlineCode",{parentName:"li"},"setup.py")),(0,o.kt)("li",{parentName:"ol"},"Open a PR"),(0,o.kt)("li",{parentName:"ol"},"An Airbyte member must comment ",(0,o.kt)("inlineCode",{parentName:"li"},"/publish-cdk dry-run=true")," to publish the package to test.pypi.org or ",(0,o.kt)("inlineCode",{parentName:"li"},"/publish-cdk dry-run=false")," to publish it to the real index of pypi.org.")),(0,o.kt)("h2",{id:"coming-soon"},"Coming Soon"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Full OAuth 2.0 support ","(","including refresh token issuing flow via UI or CLI",")"," "),(0,o.kt)("li",{parentName:"ul"},"Airbyte Java HTTP CDK"),(0,o.kt)("li",{parentName:"ul"},"CDK for Async HTTP endpoints ","(","request-poll-wait style endpoints",")"),(0,o.kt)("li",{parentName:"ul"},"CDK for other protocols"),(0,o.kt)("li",{parentName:"ul"},"Don't see a feature you need? ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/airbytehq/airbyte/issues/new?assignees=&labels=type%2Fenhancement&template=feature-request.md&title="},"Create an issue and let us know how we can help!"))))}u.isMDXComponent=!0}}]);