"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[2797],{3905:(t,e,a)=>{a.d(e,{Zo:()=>d,kt:()=>c});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):l(l({},e),t)),a},d=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,s=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),u=p(a),c=r,h=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return a?n.createElement(h,l(l({ref:e},d),{},{components:a})):n.createElement(h,l({ref:e},d))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},7657:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={},l="Postgres",o={unversionedId:"integrations/destinations/postgres",id:"integrations/destinations/postgres",title:"Postgres",description:"This page guides you through the process of setting up the Postgres destination connector.",source:"@site/../docs/integrations/destinations/postgres.md",sourceDirName:"integrations/destinations",slug:"/integrations/destinations/postgres",permalink:"/integrations/destinations/postgres",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/integrations/destinations/postgres.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Oracle DB",permalink:"/integrations/destinations/oracle"},next:{title:"Google PubSub",permalink:"/integrations/destinations/pubsub"}},s={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configure Network Access",id:"configure-network-access",level:4},{value:"Step 1: Set up Postgres",id:"step-1-set-up-postgres",level:2},{value:"<strong>Permissions</strong>",id:"permissions",level:4},{value:"Step 2: Set up the Postgres connector in Airbyte",id:"step-2-set-up-the-postgres-connector-in-airbyte",level:2},{value:"Target Database",id:"target-database",level:4},{value:"Naming Conventions",id:"naming-conventions",level:2},{value:"Supported sync modes",id:"supported-sync-modes",level:2},{value:"Schema map",id:"schema-map",level:2},{value:"Output Schema",id:"output-schema",level:4},{value:"Tutorials",id:"tutorials",level:2},{value:"Changelog",id:"changelog",level:2}],d={toc:p};function m(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"postgres"},"Postgres"),(0,r.kt)("p",null,"This page guides you through the process of setting up the Postgres destination connector."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"To use the Postgres destination, you'll need:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A Postgres server version 9.5 or above")),(0,r.kt)("p",null,"Airbyte Cloud only supports connecting to your Postgres instances with SSL or TLS encryption. TLS is\nused by default. Other than that, you can proceed with the open-source instructions below."),(0,r.kt)("p",null,"You'll need the following information to configure the Postgres destination:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Host")," - The host name of the server."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Port")," - The port number the server is listening on. Defaults to the PostgreSQL\u2122 standard port number (5432)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Username")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Password")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Default Schema Name")," - Specify the schema (or several schemas separated by commas) to be set in the search-path. These schemas will be used to resolve unqualified object names used in statements executed over this connection."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Database")," - The database name. The default is to connect to a database with the same name as the user name."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"JDBC URL Params")," (optional)")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://jdbc.postgresql.org/documentation/head/connect.html"},"Refer to this guide for more details")),(0,r.kt)("h4",{id:"configure-network-access"},"Configure Network Access"),(0,r.kt)("p",null,"Make sure your Postgres database can be accessed by Airbyte. If your database is within a VPC, you\nmay need to allow access from the IP you're using to expose Airbyte."),(0,r.kt)("h2",{id:"step-1-set-up-postgres"},"Step 1: Set up Postgres"),(0,r.kt)("h4",{id:"permissions"},(0,r.kt)("strong",{parentName:"h4"},"Permissions")),(0,r.kt)("p",null,"You need a Postgres user with the following permissions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"can create tables and write rows."),(0,r.kt)("li",{parentName:"ul"},"can create schemas e.g:")),(0,r.kt)("p",null,"You can create such a user by running:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CREATE USER airbyte_user PASSWORD <password>;\nGRANT CREATE, TEMPORARY ON DATABASE <database> TO airbyte_user;\n")),(0,r.kt)("p",null,"You can also use a pre-existing user but we highly recommend creating a dedicated user for Airbyte."),(0,r.kt)("h2",{id:"step-2-set-up-the-postgres-connector-in-airbyte"},"Step 2: Set up the Postgres connector in Airbyte"),(0,r.kt)("h4",{id:"target-database"},"Target Database"),(0,r.kt)("p",null,"You will need to choose an existing database or create a new database that will be used to store\nsynced data from Airbyte."),(0,r.kt)("h2",{id:"naming-conventions"},"Naming Conventions"),(0,r.kt)("p",null,"From ",(0,r.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/9.0/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS"},"Postgres SQL Identifiers syntax"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"SQL identifiers and key words must begin with a letter ","(","a-z, but also letters with diacritical\nmarks and non-Latin letters",")"," or an underscore ","(","_",")",".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Subsequent characters in an identifier or key word can be letters, underscores, digits ","(","0-9",")",", or\ndollar signs ","(","$",")","."),(0,r.kt)("p",{parentName:"li"},"Note that dollar signs are not allowed in identifiers according to the SQL standard,\nso their use might render applications less portable. The SQL standard will not define a key word\nthat contains digits or starts or ends with an underscore, so identifiers of this form are safe\nagainst possible conflict with future extensions of the standard.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The system uses no more than NAMEDATALEN-1 bytes of an identifier; longer names can be written in\ncommands, but they will be truncated. By default, NAMEDATALEN is 64 so the maximum identifier\nlength is 63 bytes")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Quoted identifiers can contain any character, except the character with code zero. ","(","To include a\ndouble quote, write two double quotes.",")"," This allows constructing table or column names that would\notherwise not be possible, such as ones containing spaces or ampersands. The length limitation\nstill applies.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Quoting an identifier also makes it case-sensitive, whereas unquoted names are always folded to\nlower case.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In order to make your applications portable and less error-prone, use consistent quoting with each name (either always quote it or never quote it)."))),(0,r.kt)("p",null,"Note, that Airbyte Postgres destination will create tables and schemas using the Unquoted\nidentifiers when possible or fallback to Quoted Identifiers if the names are containing special\ncharacters."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"For Airbyte Cloud:")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://cloud.airbyte.io/workspaces"},"Log into your Airbyte Cloud")," account."),(0,r.kt)("li",{parentName:"ol"},"In the left navigation bar, click ",(0,r.kt)("strong",{parentName:"li"},"Destinations"),". In the top-right corner, click ",(0,r.kt)("strong",{parentName:"li"},"new destination"),"."),(0,r.kt)("li",{parentName:"ol"},"On the Set up the destination page, enter the name for the Postgres connector\nand select ",(0,r.kt)("strong",{parentName:"li"},"Postgres")," from the Destination type dropdown."),(0,r.kt)("li",{parentName:"ol"},"Follow the ",(0,r.kt)("a",{parentName:"li",href:"/integrations/destinations/postgres#Setup-the-Postgres-Destination-in-Airbyte"},"Setup the Postgres Destination in Airbyte"))),(0,r.kt)("h2",{id:"supported-sync-modes"},"Supported sync modes"),(0,r.kt)("p",null,"The Postgres destination connector supports the\nfollowing",(0,r.kt)("a",{parentName:"p",href:"https://docs.airbyte.com/cloud/core-concepts#connection-sync-modes"}," sync modes"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Feature"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Supported?","(","Yes/No",")"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Full Refresh Sync"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Yes"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Incremental - Append Sync"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Yes"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Incremental - Deduped History"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Yes"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Namespaces"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Yes"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("h2",{id:"schema-map"},"Schema map"),(0,r.kt)("h4",{id:"output-schema"},"Output Schema"),(0,r.kt)("p",null,"Each stream will be mapped to a separate table in Postgres. Each table will contain 3 columns:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_airbyte_ab_id"),": a uuid assigned by Airbyte to each event that is processed. The column type in\nPostgres is ",(0,r.kt)("inlineCode",{parentName:"li"},"VARCHAR"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_airbyte_emitted_at"),": a timestamp representing when the event was pulled from the data source.\nThe column type in Postgres is ",(0,r.kt)("inlineCode",{parentName:"li"},"TIMESTAMP WITH TIME ZONE"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"_airbyte_data"),": a json blob representing with the event data. The column type in Postgres\nis ",(0,r.kt)("inlineCode",{parentName:"li"},"JSONB"),".")),(0,r.kt)("h2",{id:"tutorials"},"Tutorials"),(0,r.kt)("p",null,"Now that you have set up the Postgres destination connector, check out the following tutorials:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://airbyte.com/tutorials/migrate-from-mysql-to-postgresql"},"Migrate from mysql to postgres")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://airbyte.com/tutorials/postgres-replication"},"Postgres replication"))),(0,r.kt)("h2",{id:"changelog"},"Changelog"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Version"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Date"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Pull Request"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Subject"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.24"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-09-08"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/16046"},"16046")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fix missing database name URL Encoding")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.23"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-07-18"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/16260"},"16260")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Prevent traffic going on an unsecured channel in strict-encryption version of destination postgres")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.22"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-07-18"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/13840"},"13840")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Added the ability to connect using different SSL modes and SSL certificates")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.21"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-07-06"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/14479"},"14479")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Publish amd64 and arm64 versions of the connector")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.20"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-05-17"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/12820"},"12820")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Improved 'check' operation performance")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.19"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-04-25"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/12195"},"12195")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Add support for additional JDBC URL Params input")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.18"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-04-12"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/11514"},"11729")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Bump mina-sshd from 2.7.0 to 2.8.0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.17"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-04-05"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/11729"},"11729")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fixed bug with dashes in schema name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.15"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-02-25"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/10421"},"10421")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Refactor JDBC parameters handling")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.14"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2022-02-14"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/10256"},"10256")),(0,r.kt)("td",{parentName:"tr",align:"left"},"(unpublished) Add ",(0,r.kt)("inlineCode",{parentName:"td"},"-XX:+ExitOnOutOfMemoryError")," JVM option")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.13"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2021-12-01"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/8371"},"8371")),(0,r.kt)("td",{parentName:"tr",align:"left"},'Fixed incorrect handling "\\n" in ssh key')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.12"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2021-11-08"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/7719"},"7719")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Improve handling of wide rows by buffering records based on their byte size rather than their count")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.11"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2021-09-07"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/5743"},"5743")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Add SSH Tunnel support")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"0.3.10"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2021-08-11"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/5336"},"5336")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Destination Postgres: fix \\u0000","(","NULL",")"," value processing")))))}m.isMDXComponent=!0}}]);